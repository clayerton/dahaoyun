(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{BbuN:function(e,t,a){"use strict";a.r(t);var o,n,r,s,d=a("2Taf"),i=a.n(d),c=a("vZ4D"),l=a.n(c),m=a("l4Ni"),h=a.n(m),p=a("ujKo"),u=a.n(p),w=a("MhPg"),f=a.n(w),b=a("q1tI"),x=a.n(b),v=a("egxA"),g=a.n(v),y=a("wd/R"),k=a.n(y),C=a("/MKj"),B=a("Y2fQ"),E=a("tF7Z"),N=a.n(E),I=function(e){function t(){return i()(this,t),h()(this,u()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.label,a=e.quantity,o=e.percentage;return x.a.createElement("div",{className:N.a.deviceBox},x.a.createElement("div",{className:N.a.deviceBoxContent},x.a.createElement("div",{className:N.a.deviceBoxContentTop},t),x.a.createElement("div",{className:N.a.deviceBoxContentCenter},a),x.a.createElement("div",{className:N.a.deviceBoxContentBottom},Object(B["formatMessage"])({id:"total.share.ratio"}),x.a.createElement("span",{className:N.a.red},"".concat(o,"%")))))}}]),t}(x.a.PureComponent),M=(a("fV52"),a("3I+P")),S=a("eHn4"),T=a.n(S),_=a("p0pE"),O=a.n(_),j=a("ProS"),P=a.n(j),W=(a("B+YJ"),a("AH3D"),a("0o9m"),a("sRwP"),a("2w7y"),a("laiN"),function(e){function t(e){var a;return i()(this,t),a=h()(this,u()(t).call(this,e)),a._parseColorPresent=function(e,t){return[(e/L).toFixed(1),D[t%3]]},a.chart=null,a.chartBox=null,a}return f()(t,e),l()(t,[{key:"componentDidMount",value:function(){this.chart=P.a.init(this.chartBox),this.chart.setOption({series:[O()({},F,{axisLine:{lineStyle:O()({color:[this._parseColorPresent(this.props.data.total,this.props.index),[1,"rgba(255,255,255,0.1)"]]},A)},data:[{value:this.props.data.total,name:"\u9488"}]})]})}},{key:"render",value:function(){var e=this,t=this.props;t.data,t.index;return x.a.createElement("div",{ref:function(t){return e.chartBox=t},className:N.a.worshopContentItemChart})}}]),t}(x.a.PureComponent)),D=["#ff8800","#34ed95","#fddd29"],L=1e6,F=(o={name:"\u9488\u6570",type:"gauge",min:0,max:L,axisLabel:{textStyle:{fontWeight:"bolder",color:"#fff",shadowColor:"#fff",shadowBlur:10}},axisTick:{show:!1},splitLine:{show:!1}},T()(o,"axisLabel",{show:!1}),T()(o,"pointer",{shadowColor:"#fff",shadowBlur:5,length:"30%",width:5,backgroundColor:"auto"}),T()(o,"title",{show:!1}),T()(o,"detail",{borderRadius:50,backgroundColor:"auto",borderWidth:1,borderColor:"#fff",shadowColor:"#fff",shadowBlur:5,offsetCenter:[0,"50%"],textStyle:{fontWeight:"bolder",color:"#fff",fontSize:"16"},formatter:function(e){return"".concat((e/1e6*100).toFixed(0),"%")}}),o),A={width:20,shadowColor:"#fff",shadowBlur:10},R=(O()({},F,{axisLine:{lineStyle:O()({color:[[.5,D[0]],[1,"rgba(255,255,255,0.1)"]]},A)},data:[{value:5e5,name:"\u9488"}]}),function(e){function t(e){var a;return i()(this,t),a=h()(this,u()(t).call(this,e)),a.Item=function(e){var t=e.item,a=e.index;return x.a.createElement("div",{className:"".concat(N.a.worshopContentItem," ").concat((a+1)%3!==0&&N.a.worshopContentItemMarginRight)},x.a.createElement("div",{className:N.a.worshopContentItemText},x.a.createElement("div",{className:N.a.worshopContentItemTextTop},t.total),x.a.createElement("div",{className:N.a.worshopContentItemTextBottom},t.name)),x.a.createElement(W,{data:t,index:a}))},a.NestMap=function(e){var t=e.data,o=a.Item;return x.a.createElement(M["a"],{autoplay:!0,autoplaySpeed:6e3,dotPosition:"bottom"},t.map(function(e,a){if(a%6===0)return x.a.createElement("div",{className:N.a.worshopContentWindow,key:a+""},t.map(function(e,t){if(Math.ceil((a+1)/6)===Math.ceil((t+1)/6))return x.a.createElement(o,{item:e,key:t+"",index:t})}))}))},a.state={data:null},a}return f()(t,e),l()(t,[{key:"componentDidMount",value:function(){this.setState({data:this.props.data})}},{key:"componentWillReceiveProps",value:function(e){this.setState({data:e.data})}},{key:"render",value:function(){var e=this.NestMap,t=this.state.data;return x.a.createElement("div",{className:N.a.box},x.a.createElement("div",{className:N.a.title},Object(B["formatMessage"])({id:"number.of.needles.in.each.workshop"})),x.a.createElement("div",{className:N.a.worshopContent},x.a.createElement(e,{data:t||[]})))}}]),t}(x.a.PureComponent)),Y=(a("MXD1"),a("CFYs")),q=a("ydnR"),H=a("6PxE"),z=function(e){function t(){var e,a;i()(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return a=h()(this,(e=u()(t)).call.apply(e,[this].concat(n))),a.Item=function(e){var t=e.item;return x.a.createElement("div",{className:N.a.workBoxItem},x.a.createElement("div",{className:N.a.workBoxItemLeft},t.name),x.a.createElement("div",{className:N.a.workBoxItemCenter},x.a.createElement(Y["a"],{className:N.a.workBoxItemProgress,strokeColor:"#999999",percent:Object(H["a"])(t.valid,t.quantity),showInfo:!1,strokeWidth:20,status:"active",strokeLinecap:"square"})),x.a.createElement("div",{className:N.a.workBoxItemRight},"".concat(t.valid,"/").concat(t.quantity).concat(Object(q["a"])(t.unit))))},a.NestMap=function(e){var t=e.data,o=a.Item;return x.a.createElement(M["a"],{dotPosition:"right",autoplay:!0,autoplaySpeed:4e3},t.map(function(e,a){if(a%6===0)return x.a.createElement("div",{className:N.a.workBoxContentWindow,key:a+""},t.map(function(e,t){if(Math.ceil((a+1)/6)===Math.ceil((t+1)/6))return x.a.createElement(o,{item:e,key:t+""})}))}))},a}return f()(t,e),l()(t,[{key:"render",value:function(){var e=this.NestMap,t=this.props.data;return x.a.createElement("div",{className:N.a.box},x.a.createElement("div",{className:N.a.title},Object(B["formatMessage"])({id:"current.work.order.progress"})),x.a.createElement("div",{className:N.a.workBoxContent},x.a.createElement(e,{data:t||[]})))}}]),t}(x.a.PureComponent),J=(a("75ce"),function(e){function t(e){var a;return i()(this,t),a=h()(this,u()(t).call(this,e)),a.chart=null,a}return f()(t,e),l()(t,[{key:"componentDidMount",value:function(){this.chart=P.a.init(document.getElementById("echarts-yieldBox")),this.chart.setOption(G)}},{key:"shouldComponentUpdate",value:function(e){if(e.data!==this.props.data){var t=e.data,a=[],o=[],n=[],r=[];t&&t.map(function(e,t){var s=[];e.yields&&e.yields.map(function(e,t){s.push(e.valid),r.push(e.time?k()(e.time).format("HH:mm"):null)}),n=r,a.push({name:e.name,stack:e.name,data:s,type:V}),o.push({name:e.name,textStyle:Z})});var s=Array.from(new Set(n));return this.chart&&this.chart.setOption({series:a,legend:O()({},Q,{data:o}),xAxis:O()({},X,{data:s})}),!0}return!1}},{key:"render",value:function(){return x.a.createElement("div",{className:N.a.box},x.a.createElement("div",{className:N.a.title},Object(B["formatMessage"])({id:"current.production.dustribution"})),x.a.createElement("div",{id:"echarts-yieldBox",className:N.a.chart}))}}]),t}(x.a.Component)),Z={color:"#08c1f4",fontSize:"15"},K={color:"#040e5e"},U=["#fcff00","#003dff","#f20219","#00f7a1","#f19815","#ae00ff","#FF359A","#949449"],Q={orient:"vertical",right:"5%",top:"center"},V="line",X={type:"category",axisLine:{lineStyle:K},axisLabel:{color:"#fff",fontSize:"14"},name:Object(B["formatMessage"])({id:"time"}),nameTextStyle:{color:"#fff"}},G={legend:O()({},Q,{data:[{name:"\u4e00\u8f66\u95f4",textStyle:Z},{name:"\u4e8c\u8f66\u95f4",textStyle:Z},{name:"\u4e09\u8f66\u95f4",textStyle:Z},{name:"\u56db\u8f66\u95f4",textStyle:Z},{name:"\u4e94\u8f66\u95f4",textStyle:Z},{name:"\u516d\u8f66\u95f4",textStyle:Z}]}),color:U,grid:{top:"10%",left:"5%",right:"20%",bottom:"5%",containLabel:!0},xAxis:[O()({},X,{data:["00:00","02:00","04:00","06:00","08:00","10:00","12:00","14:00","16:00","18:00","20:00","22:00","24:00"]})],yAxis:{type:"value",name:Object(B["formatMessage"])({id:"number"}),nameTextStyle:{color:"#fff"},axisLine:{lineStyle:K},axisLabel:{color:"#fff",fontSize:"13"},axisTick:{show:!1},splitLine:{show:!1}},series:[{name:"\u4e00\u8f66\u95f4",type:V,stack:"\u603b\u91cf1",data:[0,0,0,0,0,0,0,0,0]},{name:"\u4e8c\u8f66\u95f4",type:V,stack:"\u603b\u91cf2",data:[0,0,0,0,0,0,0,0,0]},{name:"\u4e09\u8f66\u95f4",type:V,stack:"\u603b\u91cf3",data:[0,0,0,0,0,0,0,0,0]},{name:"\u56db\u8f66\u95f4",type:V,stack:"\u603b\u91cf4",data:[0,0,0,0,0,0,0,0,0]},{name:"\u4e94\u8f66\u95f4",type:V,stack:"\u603b\u91cf5",data:[0,0,0,0,0,0,0,0,0]},{name:"\u516d\u8f66\u95f4",type:V,stack:"\u603b\u91cf6",data:[0,0,0,0,0,0,0,0,0]}]};a.d(t,"default",function(){return $});var $=(n=Object(C["a"])(function(e){var t=e.kanBan,a=e.loading;return{data:t.concise,loading:a.effects["kanBan/watchboardConcise"]}},function(e){return{watchboardConcise:function(t){return e({type:"kanBan/watchboardConcise",payload:t})}}}),n((s=function(e){function t(e){var a;return i()(this,t),a=h()(this,u()(t).call(this,e)),a._formatWeek=function(e){switch(e){case"1":return Object(B["formatMessage"])({id:"Monday"});case"2":return Object(B["formatMessage"])({id:"Tuesday"});case"3":return Object(B["formatMessage"])({id:"Wednesday"});case"4":return Object(B["formatMessage"])({id:"Thursday"});case"5":return Object(B["formatMessage"])({id:"Friday"});case"6":return Object(B["formatMessage"])({id:"Saturday"});case"7":return Object(B["formatMessage"])({id:"Sunday"});default:return null}},a._dateAndWeek=function(){var e=k()().local(),t=e.format("YYYY-MM-DD"),o=e.format("E"),n=a._formatWeek(o);a.setState({date:t,week:n})},a._formatTime=function(e){return e>9?e:"0".concat(e)},a._clock=function(){var e=new Date,t=a._formatTime(e.getHours()),o=a._formatTime(e.getMinutes()),n=a._formatTime(e.getSeconds()),r="".concat(t,":").concat(o,":").concat(n);a.setState({time:r})},a._getData=function(){var e=k()(new Date).format("YYYY-MM-DDT00:00:00+08:00");a.props.watchboardConcise({start:e})},a._time=null,a._polling=null,a.state={time:null,date:null,week:null},a}return f()(t,e),l()(t,[{key:"componentDidMount",value:function(){this._getData(),this._dateAndWeek(),this._time=setInterval(this._clock,1e3),this._polling=setInterval(this._getData,3e4)}},{key:"componentWillUnmount",value:function(){this._time&&(clearInterval(this._time),this._time=null),this._polling&&(clearInterval(this._polling),this._polling=null)}},{key:"render",value:function(){var e=this.props.data,t=e&&e.device,a=e&&e.works,o=e&&e.workshops;return x.a.createElement("div",{className:g.a.container},x.a.createElement("div",{className:g.a.header},x.a.createElement("div",{className:g.a.headerTitle},Object(B["formatMessage"])({id:"factory.platform"})),x.a.createElement("div",null,x.a.createElement("span",{className:g.a.date},this.state.date),x.a.createElement("span",{className:g.a.date},this.state.time),x.a.createElement("span",{className:g.a.date},this.state.week))),x.a.createElement("div",{className:g.a.content},x.a.createElement("div",{className:g.a.left},x.a.createElement("div",{className:g.a.devices},x.a.createElement("div",{className:g.a.deviceBox},x.a.createElement(I,{label:Object(B["formatMessage"])({id:"device.run"}),quantity:t&&t.runs,percentage:t&&(t.runs/t.total*100).toFixed(0)})),x.a.createElement("div",{className:g.a.deviceBox},x.a.createElement(I,{label:Object(B["formatMessage"])({id:"device.stop"}),quantity:t&&(t.stops+t.errors).toFixed(0),percentage:t&&((t.stops+t.errors)/t.total*100).toFixed(0)})),x.a.createElement("div",{className:g.a.deviceBox},x.a.createElement(I,{label:Object(B["formatMessage"])({id:"device.offline"}),quantity:t&&t.offlines,percentage:t&&(t.offlines/t.total*100).toFixed(0)}))),x.a.createElement("div",{className:g.a.workshopBox},x.a.createElement(R,{data:o}))),x.a.createElement("div",{className:g.a.right},x.a.createElement("div",{className:g.a.workBox},x.a.createElement(z,{data:a})),x.a.createElement("div",{className:g.a.yieldBox},x.a.createElement(J,{data:o})))))}}]),t}(b["PureComponent"]),r=s))||r)},egxA:function(e,t,a){e.exports={container:"antd-pro-pages-dashboard-watch-board-new-index-container",header:"antd-pro-pages-dashboard-watch-board-new-index-header",headerTitle:"antd-pro-pages-dashboard-watch-board-new-index-headerTitle",date:"antd-pro-pages-dashboard-watch-board-new-index-date",content:"antd-pro-pages-dashboard-watch-board-new-index-content",left:"antd-pro-pages-dashboard-watch-board-new-index-left",right:"antd-pro-pages-dashboard-watch-board-new-index-right",devices:"antd-pro-pages-dashboard-watch-board-new-index-devices",deviceBox:"antd-pro-pages-dashboard-watch-board-new-index-deviceBox",workshopBox:"antd-pro-pages-dashboard-watch-board-new-index-workshopBox",workBox:"antd-pro-pages-dashboard-watch-board-new-index-workBox",yieldBox:"antd-pro-pages-dashboard-watch-board-new-index-yieldBox"}},tF7Z:function(e,t,a){e.exports={box:"antd-pro-pages-dashboard-watch-board-new-box-box",deviceBox:"antd-pro-pages-dashboard-watch-board-new-box-deviceBox",deviceBoxContentTop:"antd-pro-pages-dashboard-watch-board-new-box-deviceBoxContentTop",deviceBoxContentCenter:"antd-pro-pages-dashboard-watch-board-new-box-deviceBoxContentCenter",deviceBoxContentBottom:"antd-pro-pages-dashboard-watch-board-new-box-deviceBoxContentBottom",red:"antd-pro-pages-dashboard-watch-board-new-box-red",title:"antd-pro-pages-dashboard-watch-board-new-box-title",workBoxContent:"antd-pro-pages-dashboard-watch-board-new-box-workBoxContent",workBoxContentWindow:"antd-pro-pages-dashboard-watch-board-new-box-workBoxContentWindow",workBoxItem:"antd-pro-pages-dashboard-watch-board-new-box-workBoxItem",workBoxItemLeft:"antd-pro-pages-dashboard-watch-board-new-box-workBoxItemLeft",workBoxItemCenter:"antd-pro-pages-dashboard-watch-board-new-box-workBoxItemCenter",workBoxItemProgress:"antd-pro-pages-dashboard-watch-board-new-box-workBoxItemProgress",workBoxItemRight:"antd-pro-pages-dashboard-watch-board-new-box-workBoxItemRight",chart:"antd-pro-pages-dashboard-watch-board-new-box-chart",worshopContent:"antd-pro-pages-dashboard-watch-board-new-box-worshopContent",worshopContentWindow:"antd-pro-pages-dashboard-watch-board-new-box-worshopContentWindow",worshopContentItem:"antd-pro-pages-dashboard-watch-board-new-box-worshopContentItem",worshopContentItemMarginRight:"antd-pro-pages-dashboard-watch-board-new-box-worshopContentItemMarginRight",worshopContentItemText:"antd-pro-pages-dashboard-watch-board-new-box-worshopContentItemText",worshopContentItemTextTop:"antd-pro-pages-dashboard-watch-board-new-box-worshopContentItemTextTop",worshopContentItemTextBottom:"antd-pro-pages-dashboard-watch-board-new-box-worshopContentItemTextBottom",worshopContentItemChart:"antd-pro-pages-dashboard-watch-board-new-box-worshopContentItemChart"}}}]);