(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{GE2y:function(e,t,a){e.exports=a.p+"static/empty.4df811a5.png"},KqcB:function(e,t,a){"use strict";a.r(t);var n=a("d6i3"),i=a.n(n),r=a("1l/V"),s=a.n(r),o=a("2Taf"),c=a.n(o),d=a("vZ4D"),l=a.n(d),p=a("l4Ni"),m=a.n(p),u=a("ujKo"),v=a.n(u),g=a("MhPg"),f=a.n(g),h=a("q1tI"),b=a.n(h),A=a("MuoO"),E=a("obNk"),N=a.n(E),y=a("Qyje"),k=(a("k6bj"),a("bYF6")),j=k["c"]+"/api/v1/blob/one?";function R(e){return M.apply(this,arguments)}function M(){return M=s()(i.a.mark(function e(t){var a,n,r;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=null,n=null,e.prev=2,e.next=5,fetch(j+Object(y["stringify"])({id:t}),{method:"GET",headers:new Headers({Authorization:"Bearer ".concat(localStorage.getItem("token"))}),responseType:"arrayBuffer"});case 5:if(r=e.sent,404!==r.status){e.next=8;break}return e.abrupt("return",n);case 8:return e.next=10,r.arrayBuffer();case 10:a=e.sent,n="data:image/png;base64,"+btoa(new Uint8Array(a).reduce(function(e,t){return e+String.fromCharCode(t)},"")),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](2),console.log("e",e.t0);case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}},e,null,[[2,14]])})),M.apply(this,arguments)}var x,L,B,w=a("47OC"),D=a.n(w),T=a("jScA"),S=a.n(T),I=a("GE2y"),O=a.n(I),Y=a("PFFA"),G=a.n(Y),J=a("5obs"),Z=a.n(J),U=a("vPT5"),C=a.n(U),Q=a("dSG3"),z=a.n(Q),W=(a("p/lz"),a("iB1b"),a("wd/R")),H=a.n(W),F=a("Y2fQ"),V=a("HMDM"),P=(a("7ntv"),a("+5uU")),X=(a("NKb4"),{none:null,run:"#2f4c2e",error:"#ae3d1f",offline:"#666666",stop:"#ae3d1f"}),K=function(e){function t(){var e,a;c()(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return a=m()(this,(e=v()(t)).call.apply(e,[this].concat(i))),a.item=function(e,t){return b.a.createElement("div",{className:N.a.info},b.a.createElement("p",null,e),b.a.createElement("div",null),b.a.createElement("span",null,t))},a}return f()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.imgUrl,a=e.data,n=e.live,i=e.key,r=n&&n[0],s=a&&a.design&&a.design.total&&a.design.progress/a.design.total||0,o=r&&r.total&&r.progress/r.total||0,c=(o||s)>1?1:o||s,d=o||s;return b.a.createElement("div",{key:i,className:N.a.list,style:{background:r&&X[r.state]||a&&X[a.state]}},b.a.createElement("div",{className:N.a.listTop},b.a.createElement("div",{className:N.a.listTopLeft},b.a.createElement("div",{className:N.a.timeAll},b.a.createElement("img",{src:S.a}),b.a.createElement("span",null,r&&r.start&&Object(V["a"])(r.start,!0)||a&&a.start&&Object(V["a"])(a.start,!0))),b.a.createElement("div",{className:N.a.progressTotal},b.a.createElement("div",{className:N.a.progressAll},b.a.createElement("div",{className:N.a.progress,style:{width:"".concat(100*c,"%")}})),b.a.createElement("span",null,"".concat(Object(P["a"])(100*d),"%")))),b.a.createElement("div",{className:N.a.listTopRight},b.a.createElement("div",{className:N.a.imgDiv},b.a.createElement("img",{src:t||O.a})),b.a.createElement("p",null,r&&r.design||a&&a.design&&a.design.name))),b.a.createElement("div",{className:N.a.listBottom},b.a.createElement("div",{className:N.a.contentBox},this.item(a&&a.name,Object(F["formatMessage"])({id:"product.name"})),this.item(r&&r.rpm||a&&a.rpm,Object(F["formatMessage"])({id:"rotating.speed"}))),b.a.createElement("div",{className:N.a.contentBox},this.item(r&&r.update&&H()(r.update).format("HH:mm:ss")||a&&a.update&&H()(a.update).format("HH:mm:ss"),Object(F["formatMessage"])({id:"update.time"})),this.item(r&&"".concat(r.progress,"/").concat(r.total)||a&&a.design&&"".concat(a.design.progress,"/").concat(a.design.total),Object(F["formatMessage"])({id:"parameter.stitches"}))),b.a.createElement("div",{className:N.a.contentBox},this.item(a&&a.breaks,Object(F["formatMessage"])({id:"broken.line"})),this.item(a&&a.valid,Object(F["formatMessage"])({id:"output"}))),b.a.createElement("div",{className:N.a.contentBox},this.item(a&&a.errors,Object(F["formatMessage"])({id:"device.error"})),this.item(r&&r.cumulation||a&&a.cumulation,Object(F["formatMessage"])({id:"grand.total"})))))}}]),t}(h["PureComponent"]),q=K;a.d(t,"default",function(){return _});var _=(x=Object(A["connect"])(function(e){var t=e.kanBan,a=e.loading;return{deviceList:t.deviceList,deviceLive:t.deviceLive,loading:a.effects["kanBan/deviceList"]}}),x((B=function(e){function t(){var e,a;c()(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return a=m()(this,(e=v()(t)).call.apply(e,[this].concat(i))),a.state={imgUrl:[],sn:[],page:0,count:8},a.deviceFetch=function(){var e=a.props,t=e.dispatch,n=e.deviceList,i=a.state,r=(i.sn,i.page),s=i.count;t({type:"kanBan/deviceList",payload:{page:r,count:s},callback:function(){var e=n&&Math.floor(n.total/8),t=n&&n.total&&Math.ceil(n.total%8)||0;r<e?r===e-1&&0===t?a.setState(function(e){return{page:0}}):a.setState(function(e){return{page:e.page+1}}):a.setState(function(e){return{page:0}})}})},a.deviceLive=function(){var e=a.props.dispatch,t=a.state.sn;e({type:"kanBan/deviceLive",payload:{sn:t}})},a.itemCeil=function(e,t,n,i,r){var s=a.state.imgUrl,o=a.props.deviceLive,c=[];if(n<t-1||0===i&&r>=4)for(var d=function(t){var a=4*n+t,i=[];try{i=o.length>0&&o.filter(function(t,n){return t.sn===(e&&e[a]).sn})}catch(e){}c.push(b.a.createElement(q,{key:"".concat(n).concat(t),data:e&&e[a],live:i,imgUrl:s&&s[a]}))},l=0;l<4;l++)d(l);else for(var p=function(t){var a=4*n+t,i=[];try{i=o.length>0&&o.filter(function(t,n){return t.sn===(e&&e[a]).sn})}catch(e){}c.push(b.a.createElement(q,{key:"".concat(n).concat(t),data:e&&e[a],live:i,imgUrl:s&&s[a]}))},m=0;m<i;m++)p(m);return c},a.deviceList=function(e,t){var n=[];if(!t)return[];for(var i=Math.ceil(e/4),r=e%4,s=0;s<i;s++)n.push(b.a.createElement("div",{key:s,className:N.a.box},a.itemCeil(t,i,s,r,e)));return n},a.judgeImg=function(e){a.state.imgUrl;var t=e&&e.type;if("embroidery"===e.type){if("A15"===e.model)return z.a;if("A98"===e.model)return G.a;if("M98"===e.model)return Z.a;if("A18"===e.model||"A58"===e.model)return C.a}switch(t){case"glove":return D.a;default:return G.a}},a}return f()(t,e),l()(t,[{key:"componentDidMount",value:function(){var e=this,t=(this.props.dispatch,this.state);t.sn,t.page,t.count;this.deviceFetch(),this.timerDevice=setInterval(function(){e.deviceFetch()},1e4),this.timerLive=setInterval(function(){e.deviceLive()},1e3)}},{key:"componentWillReceiveProps",value:function(){var e=s()(i.a.mark(function e(t){var a,n,r,o,c=this;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=[],n=[],this.props.dispatch,r=JSON.stringify(t.deviceList)===JSON.stringify(this.props.deviceList),!r){e.next=5;break}return e.abrupt("return");case 5:if(o=t&&t.deviceList&&t.deviceList.items,e.t0=o,!e.t0){e.next=10;break}return e.next=10,Promise.all(o.map(function(){var e=s()(i.a.mark(function e(t,r){return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n.push(t.sn),!t.design.thumbnail){e.next=7;break}return e.next=4,R(t.design.thumbnail);case 4:a[r]=e.sent,e.next=8;break;case 7:a[r]=c.judgeImg(t);case 8:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()));case 10:this.setState({imgUrl:a,sn:n});case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"componentWillUnmount",value:function(){this.timerDevice&&clearTimeout(this.timerDevice),this.timerLive&&clearTimeout(this.timerLive)}},{key:"render",value:function(){var e=this.props,t=e.deviceList,a=(e.deviceLive,t&&t.total,t&&t.items),n=t&&t.items&&t.items.length;return b.a.createElement("div",{className:N.a.content},b.a.createElement("div",{className:N.a.main},this.deviceList(n,a)))}}]),t}(h["PureComponent"]),L=B))||L)},iB1b:function(e,t,a){e.exports=a.p+"static/cxj_device.d2a7ab07.jpeg"},jScA:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkUzMURGNzgzRDNBNDExRTk5QzYwOUI2RDQyREVBN0YwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkUzMURGNzg0RDNBNDExRTk5QzYwOUI2RDQyREVBN0YwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RTMxREY3ODFEM0E0MTFFOTlDNjA5QjZENDJERUE3RjAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RTMxREY3ODJEM0E0MTFFOTlDNjA5QjZENDJERUE3RjAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5SJEI8AAAB70lEQVR42syYTygEURzHZ8af2OK0soqLG0nJRamNwyKtojYpFzm5aa9OLpuSm3LbEBEHKX/a4sjJRQltLotWiCj/SsvzHb1XY7KzM2/+vW992tma3vvs/Pnt+z2ZECJxpgQ0gwZQCyrBO8iCM3BCv1tKscXzFRADLSAKmgzOvQApcAQ2wYupGdQrZJJRkCF8eQDjIFBoHjMiEZAmzuQW9NsRShB3MscjtEDczYYVoWXiTbbNCE0RbzNvJNTGMeAV6ATtIMsp1ZtP6JpjsKQDV/eNjaFoStIIrbg8FZvlk7PqB8AEq7ysYk9zDlakOS6V+JMAFUyoD1RJ/ifMhDokMTKk0GcgKohQTBVqBfWCCJUpdE3jVEJ2B1DfrmoHhVK6MvDfeioCgkZCOZsSH5rjNYpR1FqX0ZWLP8avNoXqLJ7/pa4Lja7QnU2hLrpETWsKbT6RcjBstHSW8f/RiM9TQd6y3190Do4F8ckp9H7uCSK0xe75gSBCqzJtFBXa4IV8FgqyK/QN4j7LTIJHWddK34AaPx5mVuH1dWPQr2WHUSs943HXsWKmL1v0SGbXSue65LLMDk9vP+uSTNLO7kePg7sfl2DA7nYMYwzcc4o8gThQCs0jW9zSUxu6MN1F6y7QWKo1bR+sg0PwbGaCHwEGAO7VZ480cEk8AAAAAElFTkSuQmCC"},obNk:function(e,t,a){e.exports={content:"antd-pro-pages-dashboard-device-info-board-index-content",main:"antd-pro-pages-dashboard-device-info-board-index-main",box:"antd-pro-pages-dashboard-device-info-board-index-box",list:"antd-pro-pages-dashboard-device-info-board-index-list",listTop:"antd-pro-pages-dashboard-device-info-board-index-listTop",listTopLeft:"antd-pro-pages-dashboard-device-info-board-index-listTopLeft",timeAll:"antd-pro-pages-dashboard-device-info-board-index-timeAll",progressTotal:"antd-pro-pages-dashboard-device-info-board-index-progressTotal",progressAll:"antd-pro-pages-dashboard-device-info-board-index-progressAll",progress:"antd-pro-pages-dashboard-device-info-board-index-progress",listTopRight:"antd-pro-pages-dashboard-device-info-board-index-listTopRight",imgDiv:"antd-pro-pages-dashboard-device-info-board-index-imgDiv",listBottom:"antd-pro-pages-dashboard-device-info-board-index-listBottom",contentBox:"antd-pro-pages-dashboard-device-info-board-index-contentBox",info:"antd-pro-pages-dashboard-device-info-board-index-info"}}}]);