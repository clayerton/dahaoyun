(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"5uTR":function(e,t,a){e.exports={content:"antd-pro-layouts-factory-basic-layout-content",main:"antd-pro-layouts-factory-basic-layout-main"}},"77qI":function(e,t,a){e.exports={fixedHeader:"antd-pro-layouts-factory-header-fixedHeader"}},JwhZ:function(e,t,a){e.exports={head:"antd-pro-components-top-nav-header-index-head",light:"antd-pro-components-top-nav-header-index-light",main:"antd-pro-components-top-nav-header-index-main",wide:"antd-pro-components-top-nav-header-index-wide",left:"antd-pro-components-top-nav-header-index-left",right:"antd-pro-components-top-nav-header-index-right",logo:"antd-pro-components-top-nav-header-index-logo",menu:"antd-pro-components-top-nav-header-index-menu",link:"antd-pro-components-top-nav-header-index-link"}},Kkfi:function(e,t,a){e.exports={menu:"antd-pro-components-select-lang-index-menu",dropDown:"antd-pro-components-select-lang-index-dropDown"}},h3zL:function(e,t,a){e.exports={header:"antd-pro-components-global-header-index-header",logo:"antd-pro-components-global-header-index-logo",menu:"antd-pro-components-global-header-index-menu",trigger:"antd-pro-components-global-header-index-trigger",right:"antd-pro-components-global-header-index-right",action:"antd-pro-components-global-header-index-action",search:"antd-pro-components-global-header-index-search",notice:"antd-pro-components-global-header-index-notice",account:"antd-pro-components-global-header-index-account",avatar:"antd-pro-components-global-header-index-avatar",name:"antd-pro-components-global-header-index-name",dark:"antd-pro-components-global-header-index-dark"}},vJc5:function(e,t,a){"use strict";a.r(t);var n,o,r,l=a("p0pE"),i=a.n(l),c=a("jehZ"),s=a.n(c),d=a("2Taf"),u=a.n(d),p=a("vZ4D"),m=a.n(p),h=a("l4Ni"),g=a.n(h),f=a("ujKo"),v=a.n(f),y=a("MhPg"),b=a.n(y),E=(a("B9cy"),a("Ol7k")),x=a("q1tI"),N=a.n(x),k=a("ZFw/"),C=a.n(k),w=a("MuoO"),M=a("E6Dt"),S=a("TSYQ"),W=a.n(S),D=a("lU33"),H=a("zwU1"),R=a.n(H),O=(a("Pwec"),a("CtXQ")),z=(a("ggcP"),E["a"].Footer,a("miYZ"),a("tsqr")),U=a("Y2fQ"),T=a("MFj2"),j=a("3a4m"),L=a.n(j),F=a("SQvw"),P=a.n(F),I=a("wY1l"),A=a.n(I),q=a("fqkP"),K=a.n(q),J=a("h3zL"),Q=a.n(J),Z=(a("T2oS"),a("W9HT")),B=(a("lUTK"),a("BvKs")),V=(a("+BJd"),a("mr32")),Y=a("qIgq"),X=a.n(Y),_=a("wd/R"),G=a.n(_),$=a("bt/X"),ee=a.n($),te=a("+jAw"),ae=a("Kkfi"),ne=a.n(ae),oe=function(e){function t(){var e,a;u()(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return a=g()(this,(e=v()(t)).call.apply(e,[this].concat(o))),a.changeLang=function(e){var t=e.key;Object(U["setLocale"])(t)},a}return b()(t,e),m()(t,[{key:"render",value:function(){var e=this.props.className,t=Object(U["getLocale"])(),a=["zh-CN","en-US"],n={"zh-CN":"\u7b80\u4f53\u4e2d\u6587","en-US":"English"},o={"zh-CN":"\ud83c\udde8\ud83c\uddf3","en-US":"\ud83c\uddec\ud83c\udde7"},r=N.a.createElement(B["a"],{className:ne.a.menu,selectedKeys:[t],onClick:this.changeLang},a.map(function(e){return N.a.createElement(B["a"].Item,{key:e},N.a.createElement("span",{role:"img","aria-label":n[e]},o[e])," ",n[e])}));return N.a.createElement(te["a"],{overlay:r,placement:"bottomRight"},N.a.createElement("span",{className:W()(ne.a.dropDown,e),style:{height:70,lineHeight:"70px",color:"#fff"}},n[t],N.a.createElement(O["a"],{type:"global",style:{marginLeft:"5px"},title:Object(U["formatMessage"])({id:"navBar.lang"})})))}}]),t}(x["PureComponent"]),re=function(e){function t(){var e,a;u()(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return a=g()(this,(e=v()(t)).call.apply(e,[this].concat(o))),a.getUnreadData=function(e){var t={};return Object.entries(e).forEach(function(e){var a=X()(e,2),n=a[0],o=a[1];t[n]||(t[n]=0),Array.isArray(o)&&(t[n]=o.filter(function(e){return!e.read}).length)}),t},a.changeReadState=function(e){var t=e.id,n=a.props.dispatch;n({type:"global/changeNoticeReadState",payload:t})},a}return b()(t,e),m()(t,[{key:"getNoticeData",value:function(){var e=this.props.notices,t=void 0===e?[]:e;if(0===t.length)return{};var a=t.map(function(e){var t=i()({},e);if(t.datetime&&(t.datetime=G()(e.datetime).fromNow()),t.id&&(t.key=t.id),t.extra&&t.status){var a={todo:"",processing:"blue",urgent:"red",doing:"gold"}[t.status];t.extra=N.a.createElement(V["a"],{color:a,style:{marginRight:0}},t.extra)}return t});return ee()(a,"type")}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.onMenuClick,o=e.theme,r=N.a.createElement(B["a"],{className:Q.a.menu,selectedKeys:[],onClick:n},N.a.createElement(B["a"].Item,{key:"account"},N.a.createElement(O["a"],{type:"user"}),N.a.createElement(U["FormattedMessage"],{id:"menu.account.account",defaultMessage:"account"})),N.a.createElement(B["a"].Item,{key:"password"},N.a.createElement(O["a"],{type:"edit"}),N.a.createElement(U["FormattedMessage"],{id:"menu.account.password",defaultMessage:"modify password"})),N.a.createElement(B["a"].Divider,null),N.a.createElement(B["a"].Item,{key:"logout"},N.a.createElement(O["a"],{type:"logout"}),N.a.createElement(U["FormattedMessage"],{id:"menu.account.logout",defaultMessage:"logout"}))),l=Q.a.right;return"dark"===o&&(l="".concat(Q.a.right,"  ").concat(Q.a.dark)),N.a.createElement("div",{className:l,style:{height:70,lineHeight:"70px"}},N.a.createElement("div",{className:Q.a.notice},N.a.createElement("img",{src:a("baWh")}),N.a.createElement("span",null,"99")),t&&t?N.a.createElement(x["Fragment"],null,N.a.createElement(te["a"],{overlay:r},N.a.createElement("span",{className:"".concat(Q.a.action," ").concat(Q.a.account)},N.a.createElement("span",{className:Q.a.name},t.name))),N.a.createElement(oe,null)):N.a.createElement(Z["a"],{size:"small",style:{marginLeft:8,marginRight:8}}))}}]),t}(x["PureComponent"]),le=(n=K()(600),r=function(e){function t(){var e,a;u()(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return a=g()(this,(e=v()(t)).call.apply(e,[this].concat(o))),a.toggle=function(){var e=a.props,t=e.collapsed,n=e.onCollapse;n(!t),a.triggerResizeEvent()},a}return b()(t,e),m()(t,[{key:"componentWillUnmount",value:function(){this.triggerResizeEvent.cancel()}},{key:"triggerResizeEvent",value:function(){var e=document.createEvent("HTMLEvents");e.initEvent("resize",!0,!1),window.dispatchEvent(e)}},{key:"render",value:function(){var e=this.props,t=e.collapsed,a=e.isMobile,n=e.logo,o=(e.currentUser,e.company);return N.a.createElement("div",{className:Q.a.header},a&&N.a.createElement(A.a,{to:"/",className:Q.a.logo,key:"logo"},N.a.createElement("img",{src:n,alt:"logo",width:"32"})),N.a.createElement("span",{className:Q.a.trigger,onClick:this.toggle},N.a.createElement(O["a"],{type:t?"menu-unfold":"menu-fold"})),N.a.createElement("span",{style:{fontSize:"24px"}},o&&o.name),N.a.createElement(re,this.props))}}]),t}(x["PureComponent"]),o=r,P()(o.prototype,"triggerResizeEvent",[n],Object.getOwnPropertyDescriptor(o.prototype,"triggerResizeEvent"),o.prototype),o),ie=a("oFg3"),ce=a("pMM0"),se=a("JwhZ"),de=a.n(se),ue=(a("T+dw"),function(e){function t(){var e,a;u()(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return a=g()(this,(e=v()(t)).call.apply(e,[this].concat(o))),a.state={maxWidth:void 0},a}return b()(t,e),m()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.theme,n=t.contentWidth,o=t.menuData,r=t.logo,l=t.company,i=this.state.maxWidth,c=Object(ce["b"])(o);return N.a.createElement("div",{className:"".concat(de.a.head," ").concat("light"===a?de.a.light:"")},N.a.createElement("div",{ref:function(t){e.maim=t},className:"".concat(de.a.main," ").concat("Fixed"===n?de.a.wide:"")},N.a.createElement("div",{className:de.a.left},N.a.createElement("div",{className:de.a.logo,key:"logo",id:"logo"},N.a.createElement(A.a,{to:"/"},N.a.createElement("img",{src:r,alt:"logo"}),N.a.createElement("span",null,l&&l.name))),N.a.createElement("div",{style:{maxWidth:i}},N.a.createElement(ie["default"],s()({},this.props,{flatMenuKeys:c,className:de.a.menu})))),N.a.createElement(re,this.props)))}}],[{key:"getDerivedStateFromProps",value:function(e){return{maxWidth:("Fixed"===e.contentWidth&&window.innerWidth>1200?1200:window.innerWidth)-280-120-40}}}]),t}(x["PureComponent"])),pe=a("77qI"),me=a.n(pe),he=E["a"].Header,ge=function(e){function t(){var e,a;u()(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return a=g()(this,(e=v()(t)).call.apply(e,[this].concat(o))),a.state={visible:!0},a.getHeadWidth=function(){var e=a.props,t=e.isMobile,n=e.collapsed,o=e.setting,r=o.fixedHeader,l=o.layout;return t||!r||"topmenu"===l?"100%":n?"calc(100% - 80px)":"calc(100% - 256px)"},a.handleNoticeClear=function(e){z["a"].success("".concat(Object(U["formatMessage"])({id:"component.noticeIcon.cleared"})," ").concat(Object(U["formatMessage"])({id:"component.globalHeader.".concat(e)})));var t=a.props.dispatch;t({type:"global/clearNotices",payload:e})},a.handleMenuClick=function(e){var t=e.key,n=a.props.dispatch;"userCenter"!==t?"triggerError"!==t?"userinfo"!==t?"account"!==t?"password"!==t?"logout"===t&&n({type:"user_global/logout"}):L.a.push("/factory/account/password"):L.a.push("/factory/account/modify"):L.a.push("/account/settings/base"):L.a.push("/exception/trigger"):L.a.push("/account/center")},a.handleNoticeVisibleChange=function(e){if(e){var t=a.props.dispatch;t({type:"global/fetchNotices"})}},a.handScroll=function(){var e=a.props.autoHideHeader,t=a.state.visible;if(e){var n=document.body.scrollTop+document.documentElement.scrollTop;a.ticking||(a.ticking=!0,requestAnimationFrame(function(){a.oldScrollTop>n?a.setState({visible:!0}):n>300&&t?a.setState({visible:!1}):n<300&&!t&&a.setState({visible:!0}),a.oldScrollTop=n,a.ticking=!1}))}},a.getUser=function(){var e=null;try{e=JSON.parse(localStorage.getItem("user"))}catch(e){console.log("ERROR:",e)}return e},a.getCompany=function(){var e=null;try{e=JSON.parse(localStorage.getItem("company"))}catch(e){console.log("ERROR:",e)}return e},a}return b()(t,e),m()(t,[{key:"componentDidMount",value:function(){document.addEventListener("scroll",this.handScroll,{passive:!0})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("scroll",this.handScroll)}},{key:"render",value:function(){var e=this.props,t=e.isMobile,a=e.handleMenuCollapse,n=e.setting,o=n.navTheme,r=n.layout,l=n.fixedHeader,i=this.state.visible,c="topmenu"===r,d=this.getHeadWidth(),u=i?N.a.createElement(he,{style:{padding:0,width:d,zIndex:2,background:"#f8f8f8",height:70},className:l?me.a.fixedHeader:""},c&&!t?N.a.createElement(ue,s()({theme:o,mode:"horizontal",onCollapse:a,onNoticeClear:this.handleNoticeClear,onMenuClick:this.handleMenuClick,onNoticeVisibleChange:this.handleNoticeVisibleChange,currentUser:this.getUser(),company:this.getCompany()},this.props)):N.a.createElement(le,s()({onCollapse:a,onNoticeClear:this.handleNoticeClear,onMenuClick:this.handleMenuClick,onNoticeVisibleChange:this.handleNoticeVisibleChange,currentUser:this.getUser(),company:this.getCompany()},this.props))):null;return N.a.createElement(T["default"],{component:"",transitionName:"fade"},u)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.autoHideHeader||t.visible?null:{visible:!0}}}]),t}(x["Component"]),fe=Object(w["connect"])(function(e){e.user_global;var t=e.global,a=e.setting,n=e.loading;return{collapsed:t.collapsed,fetchingMoreNotices:n.effects["global/fetchMoreNotices"],fetchingNotices:n.effects["global/fetchNotices"],notices:t.notices,setting:a}})(ge),ve=a("YUBA"),ye=a("IamK"),be=a("tGQQ"),Ee=a("5uTR"),xe=a.n(Ee),Ne=(N.a.lazy(function(){return a.e(0).then(a.bind(null,"PceP"))}),E["a"].Content),ke={"screen-xs":{maxWidth:575},"screen-sm":{minWidth:576,maxWidth:767},"screen-md":{minWidth:768,maxWidth:991},"screen-lg":{minWidth:992,maxWidth:1199},"screen-xl":{minWidth:1200,maxWidth:1599},"screen-xxl":{minWidth:1600}},Ce=function(e){function t(){var e,a;u()(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return a=g()(this,(e=v()(t)).call.apply(e,[this].concat(o))),a.getLayoutStyle=function(){var e=a.props,t=e.fixSiderbar,n=e.isMobile,o=e.collapsed,r=e.layout;return t&&"topmenu"!==r&&!n?{paddingLeft:o?"80px":"256px"}:null},a.handleMenuCollapse=function(e){var t=a.props.dispatch;t({type:"global/changeLayoutCollapsed",payload:e})},a.renderSettingDrawer=function(){return null},a}return b()(t,e),m()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,a=e.route,n=a.routes,o=a.path,r=a.authority;t({type:"setting/getSetting"}),t({type:"menu/getMenuData",payload:{routes:n,path:o,authority:r}})}},{key:"getContext",value:function(){var e=this.props,t=e.location,a=e.breadcrumbNameMap;return{location:t,breadcrumbNameMap:a}}},{key:"render",value:function(){var e=this,t=this.props,a=t.navTheme,n=t.layout,o=t.children,r=t.location.pathname,l=t.isMobile,c=t.menuData,d=t.breadcrumbNameMap,u=t.fixedHeader,p="topmenu"===n,m=u?{}:{paddingTop:0},h=N.a.createElement(E["a"],null,p&&!l?null:N.a.createElement(ye["a"],s()({logo:R.a,theme:a,onCollapse:this.handleMenuCollapse,menuData:c,isMobile:l},this.props)),N.a.createElement(E["a"],{style:i()({},this.getLayoutStyle(),{minHeight:"100vh",minWidth:1483})},N.a.createElement(fe,s()({menuData:c,handleMenuCollapse:this.handleMenuCollapse,logo:R.a,isMobile:l},this.props)),N.a.createElement(Ne,{className:xe.a.content,style:m},N.a.createElement("div",{className:xe.a.main},o))));return N.a.createElement(N.a.Fragment,null,N.a.createElement(C.a,{title:Object(be["a"])(r,d)},N.a.createElement(M["ContainerQuery"],{query:ke},function(t){return N.a.createElement(ve["a"].Provider,{value:e.getContext()},N.a.createElement("div",{className:W()(t)},h))})),N.a.createElement(x["Suspense"],{fallback:null},this.renderSettingDrawer()))}}]),t}(N.a.Component);t["default"]=Object(w["connect"])(function(e){var t=e.global,a=e.setting,n=e.menu;return i()({collapsed:t.collapsed,layout:a.layout,menuData:n.menuData,breadcrumbNameMap:n.breadcrumbNameMap},a)})(function(e){return N.a.createElement(D["a"],{query:"(max-width: 599px)"},function(t){return N.a.createElement(Ce,s()({},e,{isMobile:t}))})})}}]);