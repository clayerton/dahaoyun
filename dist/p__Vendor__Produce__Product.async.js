(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[35],{R4Yc:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,c,l,i,d,u,s,p=a("bx4M"),m=(a("Mwp2"),a("VXEj")),h=a("jehZ"),g=a.n(h),v=a("gWZ8"),f=a.n(v),y=(a("14J3"),a("BMrR")),b=(a("jCWc"),a("kPKH")),E=(a("+L6B"),a("2/Rp")),C=(a("/xke"),a("TeRw")),P=(a("2qtc"),a("kLXV")),S=a("p0pE"),k=a.n(S),w=a("2Taf"),x=a.n(w),L=a("vZ4D"),N=a.n(L),T=a("l4Ni"),I=a.n(T),D=a("ujKo"),M=a.n(D),j=a("MhPg"),O=a.n(j),z=(a("5NDa"),a("5rEg")),F=a("q1tI"),R=a.n(F),A=a("MuoO"),V=(a("wd/R"),a("zHco")),J=a("Y2fQ"),Y=a("EJem"),B=a("n+zZ"),K=a.n(B),Z=a("zPqN"),q=a.n(Z),Q=a("Pte7"),W=a.n(Q),_=a("p/lz"),H=a.n(_),U=a("RIB+"),X=a.n(U),G=a("PFFA"),$=a.n(G),ee=a("54JC"),te=(a("g9YV"),a("wCAj")),ae=(a("P2fV"),a("NJEC")),ne=(a("y8nQ"),a("Vl3Y")),re=a("Y/ft"),oe=a.n(re),ce=a("nzdv"),le=a.n(ce),ie=R.a.createContext(),de=function(e){var t=e.form,a=(e.index,oe()(e,["form","index"]));return R.a.createElement(ie.Provider,{value:t},R.a.createElement("tr",a))},ue=ne["a"].create()(de),se=function(e){function t(){var e,a;x()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=I()(this,(e=M()(t)).call.apply(e,[this].concat(r))),a.state={editing:!1},a.toggleEdit=function(){var e=a.state.editing;e=!e,a.setState({editing:e},function(){e&&a.input.focus()})},a.save=function(e){var t=a.props,n=t.record,r=t.handleSave;a.form.validateFields(function(t,o){t&&t[e.currentTarget.id]||(a.toggleEdit(),n.name!==o.name&&r(k()({},n,o)))})},a.renderCell=function(e){a.form=e;var t=a.props,n=t.children,r=t.dataIndex,o=t.record,c=t.title,l=a.state.editing;return l?R.a.createElement(ne["a"].Item,{style:{margin:0}},e.getFieldDecorator(r,{rules:[{required:!0,message:"".concat(c,"\u4e0d\u80fd\u4e3a\u7a7a.")}],initialValue:o[r]})(R.a.createElement(z["a"],{placeholder:"\u8bf7\u8f93\u5165\u5206\u7ec4",autocomplete:"off",ref:function(e){return a.input=e},onPressEnter:a.save,onBlur:a.save,autoFocus:!0}))):R.a.createElement("div",{className:le.a.editable,style:{paddingRight:24,height:"30px"},onClick:a.toggleEdit},n)},a}return O()(t,e),N()(t,[{key:"render",value:function(){var e=this.props,t=e.editable,a=(e.dataIndex,e.title,e.record,e.index,e.handleSave,e.children),n=oe()(e,["editable","dataIndex","title","record","index","handleSave","children"]);return R.a.createElement("td",n,t?R.a.createElement(ie.Consumer,null,this.renderCell):a)}}]),t}(R.a.Component),pe=(n=Object(A["connect"])(function(e){var t=e.loading;return{loading:t.effects["designList/addDesign"]}}),n((o=function(e){function t(e){var a;return x()(this,t),a=I()(this,M()(t).call(this,e)),a.handleSave=function(e){var t=a.state,n=t.curentCount,r=t.currentPage,o=a.props,c=o.dispatch;o.typeParmas;void 0===e.id?(c({type:"vdrCategory/submitCategory",payload:{add:{name:e.name},fetch:{count:n}}}),a.setState({currentPage:1})):c({type:"vdrCategory/updateCategory",payload:{upd:k()({},e),fetch:{count:n,page:r-1}}})},a.handleDelete=function(e){var t=a.props,n=t.dispatch,r=(t.typeParmas,a.state),o=r.curentCount,c=r.currentPage,l=r.dataSource,i=a.state.totalNum;if(e.id)n({type:"vdrCategory/delCategory",payload:{del:e,fetch:{count:o,page:c-1}}});else{var d=f()(l);a.setState({dataSource:d&&d.filter(function(t){return t.id!==e.id}),totalNum:i-=1})}},a.handleAdd=function(){var e=a.state.dataSource;if(0===e.filter(function(e){return void 0===e.id}).length){var t=a.state.totalNum,n={key:e.length};a.setState({dataSource:[n].concat(f()(e)),totalNum:t+=1})}},a.columns=[{title:"\u5206\u7ec4",dataIndex:"name",editable:!0,align:"center",width:"50%"},{title:"\u64cd\u4f5c",dataIndex:"operation",align:"center",render:function(e,t){return R.a.createElement(ae["a"],{title:"\u662f\u5426\u8981\u5220\u9664?",onConfirm:function(){return a.handleDelete(t)}},R.a.createElement("a",null,"\u5220\u9664"))}}],a.state={dataSource:[],curentCount:5,currentPage:1,workshopParams:{count:5,page:0}},a}return O()(t,e),N()(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.categoryList;e.categoryList!==t&&this.setState({dataSource:e&&void 0!==e.categoryList?e.categoryList.items:[],totalNum:e&&void 0!==e.categoryList?e.categoryList.total:0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.handleCancel,r=t.dispatch,o=this.state,c=o.dataSource,l=o.currentPage,i=o.totalNum,d=o.workshopParams,u={body:{row:ue,cell:se}},s=this.columns.map(function(t){return t.editable?k()({},t,{onCell:function(a){return{record:a,editable:t.editable,dataIndex:t.dataIndex,title:t.title,handleSave:e.handleSave}}}):t});c&&c.forEach(function(e,t){void 0===e.key&&(c[t]=Object.assign(e,{key:t}))});var p={onChange:function(t){r({type:"vdrCategory/fetchCategory",payload:k()({},d,{page:t-1})}),e.setState({currentPage:t})},showQuickJumper:!0,pageSize:5,total:i,showTotal:function(e){return"\u5171 ".concat(e," \u6761")},current:l};return R.a.createElement(P["a"],{title:"",width:800,visible:a,onCancel:n,footer:null},R.a.createElement(E["a"],{onClick:this.handleAdd,type:"primary",icon:"plus",style:{marginBottom:16}},"\u65b0\u589e\u5206\u7ec4"),R.a.createElement(te["a"],{components:u,rowClassName:function(){return le.a.editable_row},bordered:!0,dataSource:c,columns:s,rowKey:"key",size:"small",pagination:p}))}}]),t}(R.a.Component),r=o))||r),me=pe,he=a("iKEy"),ge=a("TvYU"),ve=a.n(ge),fe=(c=ne["a"].create(),c((i=function(e){function t(){var e,a;x()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=I()(this,(e=M()(t)).call.apply(e,[this].concat(r))),a.formLayout={labelCol:{span:9},wrapperCol:{span:13}},a.handleSubmit=function(e){e.preventDefault();var t=a.props,n=t.form,r=t.handleSubmit;n.validateFields(function(e,t){e||r(t)})},a.changeItem=function(e){var t=a.props.changeType;t(e)},a.handleCancel=function(e){e.preventDefault();var t=a.props,n=t.handleCancel,r=t.changeType;r(0),n()},a}return O()(t,e),N()(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=t.getFieldDecorator,n=t.validateFields,r=e.current,o=e.visible,c=e.type,l=e.groupList,i={okText:"\u4fdd\u5b58",onOk:this.handleSubmit,onCancel:this.handleCancel},d={getFieldDecorator:a,current:r,formLayout:this.formLayout,type:c,submit:this.handleSubmit,validateFields:n,changeItem:this.changeItem,groupList:l};return R.a.createElement(P["a"],g()({title:r&&r.id?"\u7f16\u8f91\u4ea7\u54c1":"\u65b0\u589e\u4ea7\u54c1",className:ve.a.standardListForm,width:880,bodyStyle:{padding:"28px 0 0"},destroyOnClose:!0,visible:o},i),R.a.createElement(he["a"],d))}}]),t}(F["PureComponent"]),l=i))||l),ye=fe,be=z["a"].Search,Ee=(d=Object(A["connect"])(function(e){var t=e.vdrProduct,a=e.vdrCategory,n=e.loading;return{product:t.productList,categoryList:a.typeList,loading:n.models.list}}),d((s=function(e){function t(){var e,a;x()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=I()(this,(e=M()(t)).call.apply(e,[this].concat(r))),a.state={visibleType:!1,visible:!1,current:void 0,type:0,currentPage:1,formParams:{count:9,page:0},page:0,count:9,workshopParams:{},productCount:5},a.judgeImg=function(e){switch(1){case 0:return null;case 1:return W.a;case 2:return H.a;case"glove":return q.a;case 8:return X.a;default:return null}},a.handleSearch=function(e){var t=a.props.dispatch,n=a.state.formParams;a.setState({formValues:e,currentPage:1}),t({type:"vdrProduct/getProductMenu",payload:k()({},n,{key:e})})},a.addModel=function(){var e=a.props.dispatch;a.state.workshopParams;a.setState({visible:!0,current:void 0}),e({type:"vdrCategory/fetchCategory",payload:{}})},a.typeManage=function(){var e=a.props.dispatch,t=a.state.productCount;a.setState({visibleType:!0}),e({type:"vdrCategory/fetchCategory",payload:{count:t,page:0}})},a.updProd=function(e,t){var n=a.props.dispatch,r=a.state.workshopParams;t.preventDefault(),a.setState({current:e,visible:!0}),n({type:"vdrCategory/fetchCategory",payload:k()({},r)})},a.handleDelete=function(e,t){t.preventDefault(),P["a"].confirm({title:"\u5220\u9664\u4ea7\u54c1",content:"\u786e\u5b9a\u5220\u9664\u8be5\u4ea7\u54c1\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){return a.delProd(e)}})},a.delProd=function(e){var t=a.props.dispatch,n=a.state,r=n.formParams,o=n.page;t({type:"vdrProduct/delProduct",payload:{del:e,fetch:k()({},r,{page:o})}})},a.handleSubmit=function(e){var t=a.props,n=t.dispatch,r=t.categoryList,o=a.state,c=o.formParams,l=o.current,i=o.page,d=o.count,u=null,s=r&&r.items;"string"===typeof e.typeId&&s&&(u=s.filter(function(t,a){if(t.name===e.typeId)return t}),u=u&&u[0]&&u[0].id,e=k()({},e,{typeId:u})),e&&e.headNm&&isNaN(Number(e.headNm))?C["a"].success({message:"\u5934\u6570\u8bf7\u8f93\u5165\u6570\u5b57\u7c7b\u578b"}):e&&e.stitches&&isNaN(Number(e.stitches))?C["a"].success({message:"\u9488\u6570\u8bf7\u8f93\u5165\u6570\u5b57\u7c7b\u578b"}):n(void 0!==l?{type:"vdrProduct/updateProduct",payload:{upd:k()({},l,e),fetch:{page:i,count:d}},callback:function(){a.setState({visible:!1,current:void 0})}}:{type:"vdrProduct/addProduct",payload:{add:k()({},e),fetch:k()({},c)},callback:function(){a.setState({visible:!1,current:void 0})}})},a.handleCancel=function(){a.setState({visible:!1})},a.changeType=function(e){a.setState({type:e})},a.handleTypeCancel=function(){a.setState({visibleType:!1})},a}return O()(t,e),N()(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch,t=this.state.formParams;e({type:"vdrProduct/getProductMenu",payload:k()({},t)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.visibleType,n=t.visible,r=t.currentPage,o=t.formValues,c=t.current,l=this.props,i=l.product,d=l.categoryList,u=l.dispatch,s=i&&i.items?i.items:[],h={onChange:function(t){u({type:"vdrProduct/getProductMenu",payload:k()({},o,{count:9,page:t-1})}),e.setState({currentPage:t,page:t-1})},showQuickJumper:!0,pageSize:9,total:i&&i.total?i.total:0,showTotal:function(e){return"\u5171 ".concat(e," \u6761")},current:r},v={checkboxGroup:!1,popover:!0,translateRender:this.constructor.translateRender},C={visible:a,categoryList:d,handleCancel:this.handleTypeCancel},P={visible:n,current:c,groupList:d,handleCancel:this.handleCancel,changeType:this.changeType,handleSubmit:this.handleSubmit};return R.a.createElement(V["a"],{title:Object(J["formatMessage"])({id:"vendor.menu.produce.product"})},R.a.createElement(p["a"],{bordered:!1},R.a.createElement("div",{className:K.a.tableList},R.a.createElement(y["a"],{gutter:{md:8,lg:24,xl:48},type:"flex",justify:"end"},R.a.createElement(b["a"],{md:8,sm:24},R.a.createElement("div",{className:K.a.tableListOperator},R.a.createElement(E["a"],{icon:"plus",type:"primary",onClick:this.addModel},"\u65b0\u589e\u4ea7\u54c1"),R.a.createElement("span",null,R.a.createElement(E["a"],{onClick:this.typeManage},"\u5206\u7ec4\u7ba1\u7406")))),R.a.createElement(b["a"],{md:8,sm:24}),R.a.createElement(b["a"],{md:8,sm:24},R.a.createElement(be,{placeholder:"\u8bf7\u8f93\u5165\u5de5\u827a\u5355\u53f7\\\u54c1\u540d\\\u5206\u7ec4",enterButton:"\u67e5\u8be2",onSearch:this.handleSearch,allowClear:!0})))),R.a.createElement(p["a"],{bordered:!1,bodyStyle:{padding:0}},R.a.createElement(m["a"],{rowKey:"id",loading:!1,grid:{gutter:24,lg:3,md:2,sm:2,xs:1},dataSource:f()(s),pagination:h,renderItem:function(t){return t?R.a.createElement(Y["a"],g()({avatar:R.a.createElement("img",{alt:"",className:K.a.cardAvatar,src:$.a})},v,{item:t,fromToVendorProduct:!0,actions:[R.a.createElement("a",{onClick:e.updProd.bind(e,t)},"\u4fee\u6539"),R.a.createElement("a",{onClick:e.handleDelete.bind(e,t)},"\u5220\u9664")],content:Object(ee["a"])(t)})):null}})),R.a.createElement(ye,P),R.a.createElement(me,C)))}}],[{key:"translateRender",value:function(e){return R.a.createElement("div",null,R.a.createElement("table",null,R.a.createElement("tbody",null,R.a.createElement("tr",null,R.a.createElement("td",{align:"right"},"\u5de5\u827a\u5355\xa0:\xa0"),R.a.createElement("td",null,e.craftNm)),R.a.createElement("tr",null,R.a.createElement("td",{align:"right"},"\u54c1\u540d\xa0:\xa0"),R.a.createElement("td",null,e.name)),R.a.createElement("tr",null,R.a.createElement("td",{align:"right"},"\u5206\u7ec4\xa0:\xa0"),R.a.createElement("td",null,e.typeName)),R.a.createElement("tr",null,R.a.createElement("td",{align:"right"},"\u65e5\u671f\xa0:\xa0"),R.a.createElement("td",null,e.createTime)))))}}]),t}(F["Component"]),u=s))||u);t["default"]=Ee},TvYU:function(e,t,a){e.exports={form:"antd-pro-pages-vendor-produce-product-add-or-upd-modal-index-form","ant-col-9":"antd-pro-pages-vendor-produce-product-add-or-upd-modal-index-ant-col-9"}},"n+zZ":function(e,t,a){e.exports={tableList:"antd-pro-pages-vendor-produce-product-index-tableList",tableListOperator:"antd-pro-pages-vendor-produce-product-index-tableListOperator",cardAvatar:"antd-pro-pages-vendor-produce-product-index-cardAvatar"}},nzdv:function(e,t,a){e.exports={"editable-cell":"antd-pro-pages-vendor-produce-product-edit-category-table-index-editable-cell",editable:"antd-pro-pages-vendor-produce-product-edit-category-table-index-editable",editable_row:"antd-pro-pages-vendor-produce-product-edit-category-table-index-editable_row"}}}]);