(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"7sOs":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return z});n("g9YV");var r,a,i,d=n("wCAj"),o=n("2Taf"),c=n.n(o),l=n("vZ4D"),s=n.n(l),p=n("l4Ni"),u=n.n(p),h=n("ujKo"),g=n.n(h),y=n("MhPg"),f=n.n(y),m=n("kr/Y"),x=n.n(m),w=n("dhj6"),v=n("MuoO"),k=n("wd/R"),C=n.n(k),I=n("q1tI"),O=n.n(I),E=n("Y2fQ"),M=n("s4yg"),P=n.n(M),q=n("4iOM"),z=(r=Object(v["connect"])(function(e){var t=e.department,n=e.order,r=e.loading;return{department:t.department,orderList:n.orderList,nextPage:n.orderNext,loading:r.effects["order/fetchOrder"],orderProductList:n.orderProduct}}),r((i=function(e){function t(){var e,n;c()(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=u()(this,(e=g()(t)).call.apply(e,[this].concat(a))),n.state={query:"",size:10,nextType:0,group:null},n.columns=[{title:"\u4ea7\u54c1",dataIndex:"name",align:"center",width:"5%"},{title:"\u5ba2\u6237",dataIndex:"customer",align:"center"},{title:"\u4ea4\u8d27\u65e5\u671f",dataIndex:"deadline",align:"center",width:"10%",render:function(e){return C()(e).format("YYYY-MM-DD")}},{title:"\u603b\u4ef7",dataIndex:"total",align:"center",width:"5%"},{title:"\u8fdb\u5ea6",dataIndex:"deliver",align:"center",width:"15%"},{title:"\u72b6\u6001",dataIndex:"state",align:"center",width:"10%",render:function(e){return Object(E["formatMessage"])({id:e})}},{title:"\u8ba2\u5355\u53f7",dataIndex:"id",align:"center",width:"10%"},{title:"\u5907\u6ce8",dataIndex:"note",align:"center",width:"10%"}],n.onChangeSelect=function(e){var t=n.props.dispatch,r=n.state,a=r.query,i=r.size;n.setState({nextType:0,query:"",group:e}),t({type:"order/fetchOrder",payload:{key:a,group:e,size:i}})},n.onHandleClick=function(){console.log("onHandleClick")},n.onExpand=function(e,t){var r=n.props.dispatch;e&&r({type:"order/fetchOrderOne",payload:{id:t.id}})},n.search=function(){var e=n.props.dispatch,t=n.state,r=t.query,a=t.size;n.setState({nextType:1}),e({type:"order/fetchOrderKey",payload:{key:r,size:a}})},n.onClickMore=function(){var e=n.props,t=e.nextPage,r=e.dispatch,a=n.state,i=a.size,d=a.group,o=a.nextType,c=a.query;r({type:"order/".concat(0===o?"fetchOrder":"fetchOrderKey"),payload:{size:i,page:t,group:d,key:c}})},n}return f()(t,e),s()(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch,t=this.state.size;e({type:"department/fetchDepartment",payload:{type:"workshop"}}),e({type:"order/fetchOrder",payload:{size:t}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.department,r=t.orderList,a=t.loading,i=t.orderProductList,o=t.nextPage,c=(this.state.query,{department:n,onChangeSelect:this.onChangeSelect,onHandleClick:this.onHandleClick}),l={nextPage:o,onClickMore:this.onClickMore},s=function(e){var t={};i&&i.filter(function(t){return t.orderid===e.id}).length>0&&(t=i.filter(function(t){return t.orderid===e.id})[0].value);var n=[{title:"\u8ba2\u5355\u540d\u79f0",dataIndex:"product",align:"center",width:"15%"},{title:"\u5355\u4ef7",dataIndex:"price",align:"center",width:"10%"},{title:"\u5206\u7ec4",dataIndex:"number",align:"center",width:"10%"},{title:"\u7535\u63a7",dataIndex:"unit",align:"center"}];return O.a.createElement(d["a"],{loading:!1,style:{cursor:"pointer",width:"100%"},dataSource:t&&t.items||[],columns:n,pagination:!1,rowKey:"product"})};return O.a.createElement(I["Fragment"],null,O.a.createElement(w["a"],c,O.a.createElement("div",{className:P.a.search},O.a.createElement("input",{placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u8bcd\u641c\u7d22",value:this.state.query,onChange:function(t){e.setState({query:t.target.value})},onKeyPress:function(t){"Enter"===t.key&&e.search()}}),O.a.createElement("img",{onClick:this.search,src:x.a}))),O.a.createElement(d["a"],{loading:a,className:P.a.antdTable,columns:this.columns,dataSource:r,pagination:!1,rowKey:"id",onExpand:this.onExpand,expandRowByClick:!0,expandedRowRender:s}),O.a.createElement(q["a"],l))}}]),t}(I["PureComponent"]),a=i))||a)},s4yg:function(e,t,n){e.exports={antdTable:"antd-pro-pages-factory-order-index-antdTable",search:"antd-pro-pages-factory-order-index-search"}}}]);